/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	// The require scope
/******/ 	var __webpack_require__ = {};
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
var __webpack_exports__ = {};
/*!**********************!*\
  !*** ./src/index.ts ***!
  \**********************/
__webpack_require__.r(__webpack_exports__);
var canvas = document.createElement('canvas');
var ctx = canvas.getContext("2d");
document.body.appendChild(canvas);
var grid = [];
var grid_size = 20;
var fps = 5;
var width = Math.floor(window.innerWidth / grid_size) * grid_size;
var height = Math.floor(window.innerHeight / grid_size) * grid_size;
canvas.width = width;
canvas.height = height;
function reset() {
    grid = [];
    for (var x = 0; x < width / grid_size; x++) {
        var temp_array = [];
        for (var y = 0; y < height / grid_size; y++) {
            temp_array.push(false);
        }
        grid.push(temp_array);
    }
}
reset();
function drawSquare(x, y, s, state) {
    if (state === void 0) { state = false; }
    ctx.fillStyle = state ? "white" : "black";
    ctx.fillRect(x, y, s, s);
}
function glider(x, y) {
    grid[x][y] = false;
    grid[x + 1][y] = false;
    grid[x + 2][y] = true;
    grid[x][y + 1] = true;
    grid[x + 1][y + 1] = false;
    grid[x + 2][y + 1] = true;
    grid[x][y + 2] = false;
    grid[x + 1][y + 2] = true;
    grid[x + 2][y + 2] = true;
}
glider(0, 0);
function updateGol(oldgrid) {
    var newgrid = [];
    var gh = oldgrid[0].length;
    var gw = oldgrid.length;
    for (var x = 0; x < gw; x++) {
        var temp_array = [];
        for (var y = 0; y < gh; y++) {
            var total = 0;
            // check the number of neighboring cells
            for (var i = -1; i <= 1; i++) {
                for (var j = -1; j <= 1; j++) {
                    if ((i !== 0 || j !== 0) && oldgrid[(x + i + gw) % gw][(y + j + gh) % gh]) {
                        total++;
                    }
                }
            }
            if (oldgrid[x][y] && (total == 2 || total == 3)) {
                temp_array.push(true);
            }
            else if (!oldgrid[x][y] && (total == 3)) {
                temp_array.push(true);
            }
            else {
                temp_array.push(false);
            }
        }
        newgrid.push(temp_array);
    }
    return newgrid;
}
function render(rendergrid) {
    if (rendergrid === void 0) { rendergrid = grid; }
    console.log(rendergrid.length);
    for (var x = 0; x < width / grid_size; x++) {
        for (var y = 0; y < height / grid_size; y++) {
            //TODO: figure out the odd indexing
            drawSquare(x * grid_size, y * grid_size, grid_size, rendergrid[x][y]);
        }
    }
}
function step() {
    grid = updateGol(grid);
    console.log(grid);
    render(grid);
}
var enabled = true;
setInterval(function () {
    if (enabled)
        step();
}, 1000 / fps);
addEventListener("keypress", function (ev) {
    switch (ev.key) {
        case "s":
            if (!enabled) {
                step();
            }
            break;
        case "t":
        case " ":
            enabled = !enabled;
            break;
        case "r":
            reset();
            glider(5, 5);
            break;
    }
});
step();


/******/ })()
;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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R0FBRyxHQUFHLENBQUM7QUFDZCxnQkFBZ0IsQ0FBQyxVQUFVLEVBQUUsVUFBQyxFQUFFO0lBQzlCLFFBQVEsRUFBRSxDQUFDLEdBQUcsRUFBRTtRQUNkLEtBQUssR0FBRztZQUNOLElBQUksQ0FBQyxPQUFPLEVBQUU7Z0JBQ1osSUFBSSxFQUFFO2FBQ1A7WUFFRCxNQUFLO1FBQ1AsS0FBSyxHQUFHLENBQUM7UUFDVCxLQUFLLEdBQUc7WUFDTixPQUFPLEdBQUcsQ0FBQyxPQUFPO1lBQ2xCLE1BQUs7UUFDUCxLQUFLLEdBQUc7WUFDTixLQUFLLEVBQUU7WUFDUCxNQUFNLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQztZQUNaLE1BQUs7S0FDUjtBQUNILENBQUMsQ0FBQztBQUNGLElBQUksRUFBRSIsInNvdXJjZXMiOlsid2VicGFjazovL21mZ2oyMDIzL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL21mZ2oyMDIzL3dlYnBhY2svcnVudGltZS9tYWtlIG5hbWVzcGFjZSBvYmplY3QiLCJ3ZWJwYWNrOi8vbWZnajIwMjMvLi9zcmMvaW5kZXgudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gVGhlIHJlcXVpcmUgc2NvcGVcbnZhciBfX3dlYnBhY2tfcmVxdWlyZV9fID0ge307XG5cbiIsIi8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uciA9IChleHBvcnRzKSA9PiB7XG5cdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuXHR9XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG59OyIsImltcG9ydCAqIGFzIF8gZnJvbSAnbG9kYXNoJztcbmltcG9ydCAqIGFzIFBJWEkgZnJvbSAncGl4aS5qcyc7XG5jb25zdCBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcbmNvbnN0IGN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KFwiMmRcIik7XG5kb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGNhbnZhcyk7XG50eXBlIHN0YXRlMmQgPSBib29sZWFuW11bXTtcbmxldCBncmlkOiBzdGF0ZTJkID0gW107XG5sZXQgZ3JpZF9zaXplID0gMjA7XG5sZXQgZnBzID0gNTtcblxubGV0IHdpZHRoID0gTWF0aC5mbG9vcih3aW5kb3cuaW5uZXJXaWR0aCAvIGdyaWRfc2l6ZSkgKiBncmlkX3NpemU7XG5sZXQgaGVpZ2h0ID0gTWF0aC5mbG9vcih3aW5kb3cuaW5uZXJIZWlnaHQgLyBncmlkX3NpemUpICogZ3JpZF9zaXplO1xuY2FudmFzLndpZHRoID0gd2lkdGg7XG5jYW52YXMuaGVpZ2h0ID0gaGVpZ2h0O1xuZnVuY3Rpb24gcmVzZXQoKSB7XG4gIGdyaWQgPSBbXTtcbiAgZm9yIChsZXQgeCA9IDA7IHggPCB3aWR0aCAvIGdyaWRfc2l6ZTsgeCsrKSB7XG4gICAgbGV0IHRlbXBfYXJyYXk6IGJvb2xlYW5bXSA9IFtdO1xuICAgIGZvciAobGV0IHkgPSAwOyB5IDwgaGVpZ2h0IC8gZ3JpZF9zaXplOyB5KyspIHtcbiAgICAgIHRlbXBfYXJyYXkucHVzaChmYWxzZSlcbiAgICB9XG4gICAgZ3JpZC5wdXNoKHRlbXBfYXJyYXkpXG5cbiAgfVxufVxucmVzZXQoKVxuZnVuY3Rpb24gZHJhd1NxdWFyZSh4OiBudW1iZXIsIHk6IG51bWJlciwgczogbnVtYmVyLCBzdGF0ZTogYm9vbGVhbiA9IGZhbHNlKTogdm9pZCB7XG4gIGN0eC5maWxsU3R5bGUgPSBzdGF0ZSA/IFwid2hpdGVcIiA6IFwiYmxhY2tcIjtcbiAgY3R4LmZpbGxSZWN0KHgsIHksIHMsIHMpO1xuXG59XG5mdW5jdGlvbiBnbGlkZXIoeDogbnVtYmVyLCB5OiBudW1iZXIpOiB2b2lkIHtcbiAgZ3JpZFt4XVt5XSA9IGZhbHNlXG4gIGdyaWRbeCArIDFdW3ldID0gZmFsc2VcbiAgZ3JpZFt4ICsgMl1beV0gPSB0cnVlXG4gIGdyaWRbeF1beSArIDFdID0gdHJ1ZVxuICBncmlkW3ggKyAxXVt5ICsgMV0gPSBmYWxzZVxuICBncmlkW3ggKyAyXVt5ICsgMV0gPSB0cnVlXG4gIGdyaWRbeF1beSArIDJdID0gZmFsc2VcbiAgZ3JpZFt4ICsgMV1beSArIDJdID0gdHJ1ZVxuICBncmlkW3ggKyAyXVt5ICsgMl0gPSB0cnVlXG59XG5nbGlkZXIoMCwwKVxuZnVuY3Rpb24gdXBkYXRlR29sKG9sZGdyaWQ6IHN0YXRlMmQpOiBzdGF0ZTJkIHtcbiAgbGV0IG5ld2dyaWQ6IHN0YXRlMmQgPSBbXTtcbiAgbGV0IGdoID0gb2xkZ3JpZFswXS5sZW5ndGhcbiAgbGV0IGd3ID0gb2xkZ3JpZC5sZW5ndGhcblxuICBmb3IgKGxldCB4ID0gMDsgeCA8IGd3OyB4KyspIHtcbiAgICBsZXQgdGVtcF9hcnJheTogYm9vbGVhbltdID0gW107XG4gICAgZm9yIChsZXQgeSA9IDA7IHkgPCBnaDsgeSsrKSB7XG4gICAgICBsZXQgdG90YWw6IG51bWJlciA9IDA7XG5cbiAgICAgIC8vIGNoZWNrIHRoZSBudW1iZXIgb2YgbmVpZ2hib3JpbmcgY2VsbHNcblxuICAgICAgZm9yIChsZXQgaSA9IC0xOyBpIDw9IDE7IGkrKykge1xuICAgICAgICBmb3IgKGxldCBqID0gLTE7IGogPD0gMTsgaisrKSB7XG4gICAgICAgICAgaWYgKChpICE9PSAwIHx8IGogIT09IDApICYmIG9sZGdyaWRbKHggKyBpICsgZ3cpICUgZ3ddWyh5ICsgaiArIGdoKSAlIGdoXSkge1xuICAgICAgICAgICAgdG90YWwrKztcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChvbGRncmlkW3hdW3ldICYmICh0b3RhbCA9PSAyIHx8IHRvdGFsID09IDMpKSB7XG4gICAgICAgIHRlbXBfYXJyYXkucHVzaCh0cnVlKVxuICAgICAgfVxuICAgICAgZWxzZSBpZiAoIW9sZGdyaWRbeF1beV0gJiYgKHRvdGFsID09IDMpKSB7XG4gICAgICAgIHRlbXBfYXJyYXkucHVzaCh0cnVlKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGVtcF9hcnJheS5wdXNoKGZhbHNlKVxuICAgICAgfVxuICAgIH1cbiAgICBuZXdncmlkLnB1c2godGVtcF9hcnJheSlcbiAgfVxuICByZXR1cm4gbmV3Z3JpZDtcbn1cbmZ1bmN0aW9uIHJlbmRlcihyZW5kZXJncmlkOiBzdGF0ZTJkID0gZ3JpZCkge1xuICBjb25zb2xlLmxvZyhyZW5kZXJncmlkLmxlbmd0aClcbiAgZm9yIChsZXQgeCA9IDA7IHggPCB3aWR0aCAvIGdyaWRfc2l6ZTsgeCsrKSB7XG5cbiAgICBmb3IgKGxldCB5ID0gMDsgeSA8IGhlaWdodCAvIGdyaWRfc2l6ZTsgeSsrKSB7XG4gICAgICAvL1RPRE86IGZpZ3VyZSBvdXQgdGhlIG9kZCBpbmRleGluZ1xuICAgICAgZHJhd1NxdWFyZSh4ICogZ3JpZF9zaXplLCB5ICogZ3JpZF9zaXplLCBncmlkX3NpemUsIHJlbmRlcmdyaWRbeF1beV0pXG5cbiAgICB9XG4gIH1cbn1cbmZ1bmN0aW9uIHN0ZXAoKSB7XG4gIGdyaWQgPSB1cGRhdGVHb2woZ3JpZCk7XG4gIGNvbnNvbGUubG9nKGdyaWQpO1xuICByZW5kZXIoZ3JpZClcbn1cbmxldCBlbmFibGVkID0gdHJ1ZVxuc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICBpZiAoZW5hYmxlZCkgc3RlcCgpXG59LCAxMDAwIC8gZnBzKVxuYWRkRXZlbnRMaXN0ZW5lcihcImtleXByZXNzXCIsIChldikgPT4ge1xuICBzd2l0Y2ggKGV2LmtleSkge1xuICAgIGNhc2UgXCJzXCI6XG4gICAgICBpZiAoIWVuYWJsZWQpIHtcbiAgICAgICAgc3RlcCgpXG4gICAgICB9XG5cbiAgICAgIGJyZWFrXG4gICAgY2FzZSBcInRcIjpcbiAgICBjYXNlIFwiIFwiOlxuICAgICAgZW5hYmxlZCA9ICFlbmFibGVkXG4gICAgICBicmVha1xuICAgIGNhc2UgXCJyXCI6XG4gICAgICByZXNldCgpXG4gICAgICBnbGlkZXIoNSwgNSlcbiAgICAgIGJyZWFrXG4gIH1cbn0pXG5zdGVwKCkiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=